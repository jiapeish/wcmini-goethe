<view class="container">
  <!-- AI Info -->
  <view class="ai-info">
    <image class="avatar" src="/pages/images/assist.png" mode="aspectFill"></image>
    <text class="ai-name">âš¡ï¸AIåŠ©æ‰‹</text>
  </view>

  <!-- Chat Area -->
  <scroll-view 
    class="messages" 
    scroll-y 
    scroll-into-view="msg-{{messages.length-1}}"
  >
    <!-- Welcome Message -->
    <view class="message assistant" wx:if="{{messages.length === 0}}">
      <view class="message-content">
        <text user-select="true">ä½ å¥½ï¼Œæˆ‘æ˜¯AIåŠ©æ‰‹ã€‚</text>
        <view class="message-footer">
          <button class="copy-btn" bindtap="copyMessage" data-text="ä½ å¥½ï¼Œæˆ‘æ˜¯AIåŠ©æ‰‹ã€‚">
            <text class="copy-icon">ğŸ“‹</text>
            <text>å¤åˆ¶</text>
          </button>
        </view>
      </view>
    </view>

    <!-- Chat Messages -->
    <block wx:for="{{messages}}" wx:key="index">
      <view id="msg-{{index}}" class="message {{item.role === 'user' ? 'user' : 'assistant'}}">
        <view class="message-content">
          <text user-select="true">{{item.content}}</text>
          <view class="message-footer" wx:if="{{item.role === 'assistant'}}">
            <button 
              class="copy-btn"
              bindtap="copyMessage"
              data-text="{{item.content}}"
            >
              <text class="copy-icon">ğŸ“‹</text>
              <text>å¤åˆ¶</text>
            </button>
          </view>
        </view>
      </view>
    </block>

    <!-- Suggested Questions -->
    <view class="suggestions" wx:if="{{messages.length === 0}}">
      <view class="suggestion-item" bindtap="handleSuggestion" data-text="ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±ã€‚">
        ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±ã€‚
      </view>
      <view class="suggestion-item" bindtap="handleSuggestion" data-text="ä½ èƒ½å¸®æˆ‘å›ç­”ä»€ä¹ˆé—®é¢˜ï¼Ÿ">
        ä½ èƒ½å¸®æˆ‘å›ç­”ä»€ä¹ˆé—®é¢˜ï¼Ÿ
      </view>
    </view>
  </scroll-view>

  <!-- Input Area -->
  <view class="input-area">
    <view style="position: relative;">
      <input 
        class="input"
        value="{{inputValue}}"
        placeholder="è¯·å°†æ‚¨é‡åˆ°çš„é—®é¢˜å‘Šè¯‰æˆ‘"
        placeholder-class="input-placeholder"
        bindinput="handleInput"
        bindconfirm="sendMessage"
        confirm-type="send"
        maxlength="1024"
        disabled="{{!initialized || loading}}"
      />
      <view class="input-actions">
        <text class="char-count">{{inputValue.length}}/1024</text>
        <button 
          class="clear-btn"
          bindtap="clearMessages"
          wx:if="{{messages.length > 0}}"
        >
          <text class="clear-icon">ğŸ—‘ï¸</text>
        </button>
        <button 
          class="send-btn"
          bindtap="sendMessage"
          disabled="{{!initialized || loading || !inputValue}}"
        >
          <text class="send-icon">âœˆï¸</text>
        </button>
      </view>
    </view>
  </view>

  <!-- Footer -->
  <view class="footer">
    <text class="footer-text">â¤ï¸ Von Menschen, fÃ¼r Menschen â€“ mit KI</text>
  </view>
</view>
